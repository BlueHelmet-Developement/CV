@page "/"
@using CV.Services
@inject IChatGptService ChatGptService
@rendermode InteractiveServer

<h3>Chat with GPT</h3>

<div>
    <input @bind="userPrompt" placeholder="Enter your prompt" />
    <button @onclick="SendMessage">Send</button>
</div>

@if (!string.IsNullOrEmpty(chatGPTResponse))
{
    <p><strong>ChatGPT:</strong> @chatGPTResponse</p>
}

@code {
    private string userPrompt = string.Empty;
    private string chatGPTResponse = string.Empty;

    private async Task SendMessage()
    {
        try
        {
            chatGPTResponse = await ChatGptService.GetChatGPTResponseAsync(userPrompt);
        }
        catch (Exception ex)
        {
            chatGPTResponse = $"Error: {ex.Message}";
        }
    }
}